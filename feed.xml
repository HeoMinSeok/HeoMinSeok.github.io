<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="ko-KR"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://heominseok.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://heominseok.github.io/" rel="alternate" type="text/html" hreflang="ko-KR" /><updated>2024-07-20T19:47:33+09:00</updated><id>https://heominseok.github.io/feed.xml</id><title type="html">MINDDO</title><subtitle>MINDDOì˜ ì½”ë”© ê¸°ë¡ì¥</subtitle><entry><title type="html">[ìœ ë°ë¯¸xìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬] í”„ë¡œì íŠ¸ ìº í”„ : Next.js 2ê¸° - í•™ìŠµ ì¼ì§€ 1ì£¼ì°¨</title><link href="https://heominseok.github.io/posts/%ED%95%99%EC%8A%B5%EC%9D%BC%EC%A7%80/" rel="alternate" type="text/html" title="[ìœ ë°ë¯¸xìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬] í”„ë¡œì íŠ¸ ìº í”„ : Next.js 2ê¸° - í•™ìŠµ ì¼ì§€ 1ì£¼ì°¨" /><published>2024-07-20T00:00:00+09:00</published><updated>2024-07-20T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/%ED%95%99%EC%8A%B5%EC%9D%BC%EC%A7%80</id><content type="html" xml:base="https://heominseok.github.io/posts/%ED%95%99%EC%8A%B5%EC%9D%BC%EC%A7%80/"><![CDATA[]]></content><author><name></name></author><category term="Next.js ì§ë¬´êµìœ¡" /><category term="1ì£¼ì°¨" /><category term="ìœ ë°ë¯¸" /><category term="udemy" /><category term="ì›…ì§„ì”½í¬ë¹…" /><category term="ìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬" /><category term="Next.js" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">[ìœ ë°ë¯¸xìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬] í”„ë¡œì íŠ¸ ìº í”„ : Next.js 2ê¸° - ì§ë¬´êµìœ¡ 1ì¼ì°¨</title><link href="https://heominseok.github.io/posts/%EC%88%98%EC%97%85-%EB%82%B4%EC%9A%A9-%EC%A0%80%EB%A6%AC/" rel="alternate" type="text/html" title="[ìœ ë°ë¯¸xìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬] í”„ë¡œì íŠ¸ ìº í”„ : Next.js 2ê¸° - ì§ë¬´êµìœ¡ 1ì¼ì°¨" /><published>2024-07-15T00:00:00+09:00</published><updated>2024-07-15T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/%EC%88%98%EC%97%85%20%EB%82%B4%EC%9A%A9%20%EC%A0%80%EB%A6%AC</id><content type="html" xml:base="https://heominseok.github.io/posts/%EC%88%98%EC%97%85-%EB%82%B4%EC%9A%A9-%EC%A0%80%EB%A6%AC/"><![CDATA[<h2 id="-javascriptë¥¼-ì‹¤í–‰-ì‹œí‚¤ëŠ”-ë°©ë²•">ğŸš€ JavaScriptë¥¼ ì‹¤í–‰ ì‹œí‚¤ëŠ” ë°©ë²•</h2>
<h3 id="1ï¸âƒ£-node-ëª…ë ¹ì–´ë¥¼-ì‚¬ìš©">1ï¸âƒ£ <strong>node</strong> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©</h3>
<ol>
  <li>ìš°ì„  ì‹¤í–‰ì‹œí‚¬ js íŒŒì¼ë¡œ ì´ë™í•œë‹¤.
    <div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c">#  ex</span>
<span class="nb">cd </span>Desktop/my-app/next-study.js
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>node ëª…ë ¹ì–´ë¡œ ì‹¤í–‰
    <div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>node next-study.js
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ol>

<h3 id="2ï¸âƒ£-code-runner-ìµìŠ¤í…ì…˜ì„-ì‚¬ìš©">2ï¸âƒ£ <strong>code runner</strong> ìµìŠ¤í…ì…˜ì„ ì‚¬ìš©</h3>
<p><img src="/assets/img/posts/training/js-code-runner.png" alt="Code Runner" width="auto" height="auto" /> <em>Code Runner</em></p>
<ol>
  <li>vscode Extensions -&gt; code runner ê²€ìƒ‰ í›„ ì„¤ì¹˜</li>
  <li>ì‹¤í–‰ì‹œí‚¬ js íŒŒì¼ì—ì„œ ì¶œë ¥í•  ê²°ê³¼ console.log ì‘ì„± í›„ <code class="language-plaintext highlighter-rouge">â‡§ + space</code></li>
</ol>

<h3 id="3ï¸âƒ£-html-íŒŒì¼ì—ì„œ-script-íƒœê·¸ë¥¼-ì‚¬ìš©">3ï¸âƒ£ html íŒŒì¼ì—ì„œ <strong>script íƒœê·¸</strong>ë¥¼ ì‚¬ìš©</h3>
<ul>
  <li>ì™¸ë¶€ ìŠ¤í¬ë¦½íŠ¸
    <ul>
      <li>head íƒœê·¸ ì‚¬ì´</li>
    </ul>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title&gt;</span>Document<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"js íŒŒì¼ ê²½ë¡œ"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <ul>
      <li>ğŸ”¥ ì†ì„±</li>
    </ul>

    <p><code class="language-plaintext highlighter-rouge">async</code> : async ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œëœë‹¤. ì¦‰, HTML íŒŒì‹±ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆ ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œí•˜ê³ , ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ë°”ë¡œ ì‹¤í–‰ëœë‹¤.</p>

    <p><code class="language-plaintext highlighter-rouge">defer</code> : defer ì†ì„±ì„ ì‚¬ìš©í•˜ë©´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ë¡œë“œë˜ì§€ë§Œ, HTML íŒŒì‹±ì´ ì™„ë£Œëœ í›„ì— ì‹¤í–‰ëœë‹¤. ì´ëŠ” HTML ë¬¸ì„œì˜ íŒŒì‹±ì´ ëë‚  ë•Œê¹Œì§€ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒì„ ë³´ì¥í•´ì¤€ë‹¤.</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">ì†ì„±</th>
          <th style="text-align: center">ì‹¤í–‰ ì‹œì </th>
          <th style="text-align: center">ì‹¤í–‰ ìˆœì„œ</th>
          <th style="text-align: center">ë¹„ê³ </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center"><span>async</span></td>
          <td style="text-align: center">ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì¦‰ì‹œ ì‹¤í–‰</td>
          <td style="text-align: center">ìˆœì„œ ë³´ì¥ ì•ˆë¨</td>
          <td style="text-align: center">ë…ë¦½ì ì¸ ìŠ¤í¬ë¦½íŠ¸ì— ì í•©</td>
        </tr>
        <tr>
          <td style="text-align: center"><span>defer</span></td>
          <td style="text-align: center">HTML íŒŒì‹± ì™„ë£Œ í›„ ì‹¤í–‰</td>
          <td style="text-align: center">ìˆœì„œ ë³´ì¥ë¨</td>
          <td style="text-align: center">DOM ì˜ì¡´ ìŠ¤í¬ë¦½íŠ¸ì— ì í•©</td>
        </tr>
      </tbody>
    </table>

    <ul>
      <li>body íƒœê·¸ ì‚¬ì´</li>
    </ul>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;body&gt;</span>
<span class="c">&lt;!-- body content --&gt;</span>
  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"js íŒŒì¼ ê²½ë¡œ"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

    <p>ğŸ¥ ëª¨ë“  DOM ìš”ì†Œê°€ íŒŒì‹±ëœ í›„ ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œ</p>
  </li>
  <li>ë‚´ë¶€ ìŠ¤í¬ë¦½íŠ¸ <br />
  â¡ï¸ ğŸ¥ ë§ ê·¸ëŒ€ë¡œ HTML íŒŒì¼ ë‚´ë¶€ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•œë‹¤. ê³µë¶€í•  ë•Œ ë§ê³ ëŠ” ì™ ë§Œí•˜ë©´ ì“°ì§€ë§ì !</li>
</ul>

<h3 id="4ï¸âƒ£-ì›¹-ë¸Œë¼ìš°ì €ì˜-ê°œë°œì-ë„êµ¬-ï¸-console-íƒ­ì—ì„œ-ì‘ì„±í•˜ëŠ”-ë°©ë²•">4ï¸âƒ£ <strong>ì›¹ ë¸Œë¼ìš°ì €ì˜ ê°œë°œì ë„êµ¬</strong> â¡ï¸ Console íƒ­ì—ì„œ ì‘ì„±í•˜ëŠ” ë°©ë²•</h3>
<h4 id="ï¸-í¬ë¡¬---ë§ˆìš°ìŠ¤-ìš°í´ë¦­---ê²€ì‚¬---console-íƒ­">âœ”ï¸ í¬ë¡¬ -&gt; ë§ˆìš°ìŠ¤ ìš°í´ë¦­ -&gt; ê²€ì‚¬ -&gt; Console íƒ­</h4>
<div style="text-align: center;">
  <img src="/assets/img/posts/training/js-webconsole.gif" alt="ê°œë°œì ë„êµ¬ Console íƒ­" style="height: 300px;" />
</div>

<h2 id="-ë³€ìˆ˜--ìƒìˆ˜">ğŸš€ ë³€ìˆ˜ / ìƒìˆ˜</h2>

<h3 id="1ï¸âƒ£-ìƒìˆ˜">1ï¸âƒ£ ìƒìˆ˜</h3>
<ul>
  <li>ìƒìˆ˜ëŠ” ê°’ì„ í•œ ë²ˆ í• ë‹¹í•˜ë©´ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë³€ìˆ˜</li>
  <li><code class="language-plaintext highlighter-rouge">const</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ ì–¸</li>
</ul>

<h3 id="2ï¸âƒ£-ë³€ìˆ˜">2ï¸âƒ£ ë³€ìˆ˜</h3>
<ul>
  <li>ë³€ìˆ˜ëŠ” ë³€í•˜ëŠ” ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ê³µê°„</li>
  <li>JavaScriptì—ì„œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ <code class="language-plaintext highlighter-rouge">var</code>, <code class="language-plaintext highlighter-rouge">let</code>, <code class="language-plaintext highlighter-rouge">const</code> í‚¤ì›Œë“œë¥¼ ì‚¬ìš©
    <blockquote>
      <p>var: í•¨ìˆ˜ ìŠ¤ì½”í”„, ì¬ì„ ì–¸ ê°€ëŠ¥, ì¬í• ë‹¹ ê°€ëŠ¥ <br />
let: ë¸”ë¡ ìŠ¤ì½”í”„, ì¬ì„ ì–¸ ë¶ˆê°€, ì¬í• ë‹¹ ê°€ëŠ¥ <br />
const: ë¸”ë¡ ìŠ¤ì½”í”„, ì¬ì„ ì–¸ ë¶ˆê°€, ì¬í• ë‹¹ ë¶ˆê°€, ë‹¨, ê°ì²´ë‚˜ ë°°ì—´ì˜ ê²½ìš° ë‚´ë¶€ ê°’ì€ ë³€ê²½ ê°€ëŠ¥</p>
    </blockquote>
  </li>
</ul>

<h3 id="3ï¸âƒ£-ì‚¬ìš©-ì§€ì¹¨">3ï¸âƒ£ ì‚¬ìš© ì§€ì¹¨</h3>
<ul>
  <li>varëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ</li>
  <li>letì€ ì¬í• ë‹¹ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©</li>
  <li>constëŠ” ì¬í• ë‹¹ì´ í•„ìš” ì—†ì„ ë•Œ ì‚¬ìš©</li>
  <li>â—ï¸ ìŠµê´€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë„ë¡ ë…¸ë ¥</li>
</ul>

<h2 id="-ê¸°íƒ€-ê¸°í˜¸">ğŸš€ ê¸°íƒ€ ê¸°í˜¸</h2>
<ul>
  <li>; -&gt; ì„¸ë¯¸ì½œë¡ </li>
  <li>: -&gt; ì½œë¡ </li>
  <li>â€ -&gt; í°ë”°ì˜´í‘œ</li>
  <li>â€™ -&gt; ì‘ì€ë”°ì˜´í‘œ</li>
  <li>`` -&gt; ë°±í‹±</li>
  <li>[] -&gt; ëŒ€ê´„í˜¸</li>
  <li>{} -&gt; ì¤‘ê´„í˜¸</li>
  <li>() -&gt; ì†Œê´„í˜¸</li>
</ul>]]></content><author><name></name></author><category term="Next.js ì§ë¬´êµìœ¡" /><category term="JavaScript" /><category term="JavaScript" /><category term="ìœ ë°ë¯¸" /><category term="udemy" /><category term="ì›…ì§„ì”½í¬ë¹…" /><category term="ìŠ¤ë‚˜ì´í¼íŒ©í† ë¦¬" /><category term="Next.js" /><summary type="html"><![CDATA[ğŸš€ JavaScriptë¥¼ ì‹¤í–‰ ì‹œí‚¤ëŠ” ë°©ë²• 1ï¸âƒ£ node ëª…ë ¹ì–´ë¥¼ ì‚¬ìš© ìš°ì„  ì‹¤í–‰ì‹œí‚¬ js íŒŒì¼ë¡œ ì´ë™í•œë‹¤. 1 2 # ex cd Desktop/my-app/next-study.js node ëª…ë ¹ì–´ë¡œ ì‹¤í–‰ 1 node next-study.js]]></summary></entry><entry><title type="html">VITE - Spring Boot CORS ì„¤ì •</title><link href="https://heominseok.github.io/posts/CORS-%EC%84%A4%EC%A0%95/" rel="alternate" type="text/html" title="VITE - Spring Boot CORS ì„¤ì •" /><published>2024-07-11T00:00:00+09:00</published><updated>2024-07-11T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/CORS%20%EC%84%A4%EC%A0%95</id><content type="html" xml:base="https://heominseok.github.io/posts/CORS-%EC%84%A4%EC%A0%95/"><![CDATA[<p><img src="/assets/img/posts/Petstagram-Project/cors-setting.webp" alt="CORS ì„¤ì •" />
<em>ì›¹ ê°œë°œì—ì„œì˜ CORS ì„¤ì •</em></p>

<h2 id="corsë€">CORSë€?</h2>

<p><strong>CORS(Cross-Origin Resource Sharing)</strong>ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ í•˜ë‚˜ì˜ ì¶œì²˜ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë¦¬ì†ŒìŠ¤ê°€ ë‹¤ë¥¸ ì¶œì²˜ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ëŠ” ë³´ì•ˆ ê¸°ëŠ¥ì´ë‹¤. ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ ì¶œì²˜(ë„ë©”ì¸, í”„ë¡œí† ì½œ, í¬íŠ¸)ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ ì œí•œí•œë‹¤. ì´ëŸ¬í•œ ì œì•½ì„ <strong>ë™ì¼ ì¶œì²˜ ì •ì±…(Same-Origin Policy)</strong>ì´ë¼ê³  í•˜ë©°, ì´ë¥¼ ìš°íšŒí•˜ê¸° ìœ„í•´ CORSê°€ ë„ì…ë˜ì—ˆë‹¤.</p>

<h2 id="cors-ì„¤ì •í•˜ëŠ”-ì´ìœ ">CORS ì„¤ì •í•˜ëŠ” ì´ìœ </h2>

<p>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì—ì„œ CORSë¥¼ ì„¤ì •í•˜ëŠ” ì£¼ëœ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ol>
  <li>ë‹¤ë¥¸ ì¶œì²˜ì˜ APIì— ì ‘ê·¼í•˜ê¸° ìœ„í•´:
    <blockquote>
      <ul>
        <li>ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìì£¼ ë‹¤ë¥¸ ì¶œì²˜ì˜ APIì™€ ìƒí˜¸ì‘ìš©í•œë‹¤. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì„œë²„ APIë¥¼ í˜¸ì¶œí•  ë•Œ ì„œë²„ê°€ ë‹¤ë¥¸ ë„ë©”ì¸ì— ìˆì„ ê²½ìš°, ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ì´ëŸ¬í•œ ìš”ì²­ì„ ì°¨ë‹¨í•œë‹¤. CORS ì„¤ì •ì„ í†µí•´ ì´ëŸ¬í•œ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.</li>
      </ul>
    </blockquote>
  </li>
  <li>ë³´ì•ˆ ìœ ì§€:
    <blockquote>
      <ul>
        <li>CORSëŠ” ë³´ì•ˆ ì •ì±…ì„ ìœ ì§€í•˜ë©´ì„œë„ íŠ¹ì • ì¶œì²˜ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì´ë¥¼ í†µí•´ ë¯¼ê°í•œ ë°ì´í„°ì— ëŒ€í•œ ë¬´ë‹¨ ì ‘ê·¼ì„ ë°©ì§€í•˜ê³ , ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¶œì²˜ì—ì„œë§Œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ í—ˆìš©í•  ìˆ˜ ìˆë‹¤.</li>
      </ul>
    </blockquote>
  </li>
  <li>ê°œë°œ í™˜ê²½ì—ì„œì˜ í¸ì˜ì„±:
    <blockquote>
      <ul>
        <li>ê°œë°œ ì¤‘ì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ì„œë²„ê°€ ì¢…ì¢… ë‹¤ë¥¸ ë„ë©”ì¸ì—ì„œ ì‹¤í–‰ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë³¸ì¸ í”„ë¡œì íŠ¸ì˜ ë¡œì»¬ í™˜ê²½ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œëŠ” http://localhost:5173ì—ì„œ, ë°±ì—”ë“œëŠ” http://localhost:8088ì—ì„œ ì‹¤í–‰í•˜ì˜€ë‹¤. ì´ ê²½ìš°, CORS ì„¤ì •ì„ í†µí•´ ê°œë°œ ì¤‘ì— ë°œìƒí•˜ëŠ” ë„ë©”ì¸ ê°„ì˜ ìš”ì²­ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œë¥¼ ì›í™œí•˜ê²Œ í†µí•©í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤.</li>
      </ul>
    </blockquote>
  </li>
</ol>

<h2 id="viteì—ì„œ-cors-ì„¤ì •">Viteì—ì„œ CORS ì„¤ì •</h2>

<p>Viteë¥¼ ì‚¬ìš©í•  ë•Œ CORS ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” <code class="language-plaintext highlighter-rouge">vite.config.js</code> íŒŒì¼ì—ì„œ í”„ë¡ì‹œ ì„¤ì •ì„ í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">defineConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vite</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">react</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@vitejs/plugin-react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nf">defineConfig</span><span class="p">({</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span><span class="nf">react</span><span class="p">()],</span>
    <span class="na">server</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">proxy</span><span class="p">:</span> <span class="p">{</span>
            <span class="dl">"</span><span class="s2">/api</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">target</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://localhost:8088</span><span class="dl">"</span><span class="p">,</span>
                <span class="na">changeOrigin</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="na">rewrite</span><span class="p">:</span> <span class="p">(</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nf">replace</span><span class="p">(</span><span class="sr">/^</span><span class="se">\/</span><span class="sr">api/</span><span class="p">,</span> <span class="dl">""</span><span class="p">),</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="springbootì—ì„œ-cors-ì„¤ì •">SpringBootì—ì„œ CORS ì„¤ì •</h2>

<p>ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í´ë˜ìŠ¤ì—ì„œ CORS ì„¤ì •ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">com.petstagram.config.AuditorAwareImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.AuditorAware</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.config.EnableJpaAuditing</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.jpa.repository.config.EnableJpaRepositories</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.scheduling.annotation.EnableScheduling</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.CorsRegistry</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.config.annotation.WebMvcConfigurer</span><span class="o">;</span>

<span class="nd">@EnableJpaRepositories</span>
<span class="nd">@EnableJpaAuditing</span>
<span class="nd">@EnableScheduling</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PetstagramApplication</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuditorAware</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">auditorProvide</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">AuditorAwareImpl</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">PetstagramApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">WebMvcConfigurer</span> <span class="nf">corsConfigurer</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">WebMvcConfigurer</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCorsMappings</span><span class="o">(</span><span class="nc">CorsRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">registry</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">"/**"</span><span class="o">)</span> 
                        <span class="o">.</span><span class="na">allowedMethods</span><span class="o">(</span><span class="s">"*"</span><span class="o">)</span> 
                        <span class="o">.</span><span class="na">allowedOrigins</span><span class="o">(</span><span class="s">"http://localhost:5173"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><summary type="html"><![CDATA[ì›¹ ê°œë°œì—ì„œì˜ CORS ì„¤ì •]]></summary></entry><entry><title type="html">ğŸ¥ My Tech Stack</title><link href="https://heominseok.github.io/posts/MINDDO-TECH-STACK/" rel="alternate" type="text/html" title="ğŸ¥ My Tech Stack" /><published>2024-06-30T00:00:00+09:00</published><updated>2024-06-30T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/MINDDO-TECH-STACK</id><content type="html" xml:base="https://heominseok.github.io/posts/MINDDO-TECH-STACK/"><![CDATA[<p><img src="https://img.shields.io/badge/Typescript-3178C6?style=flat&amp;logo=typescript&amp;logoColor=white" />
<img src="https://img.shields.io/badge/AWS-232F3E?style=for-the-badge&amp;logo=amazon%20aws&amp;logoColor=black" /></p>]]></content><author><name></name></author><category term="Tech Stack" /><category term="Minddo" /><category term="React" /><category term="Spring Boot" /><category term="Vite" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (5)</title><link href="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(5)/" rel="alternate" type="text/html" title="JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (5)" /><published>2024-06-13T00:00:00+09:00</published><updated>2024-06-13T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/JWT%20+%20%EC%B9%B4%EC%B9%B4%EC%98%A4%20%EC%86%8C%EC%85%9C%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%20(5)</id><content type="html" xml:base="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(5)/"><![CDATA[<h1 id="-server-side">ğŸ“Œ Server Side</h1>

<h2 id="4-í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„°-ì „ë‹¬-ë°›ì€-ì¸ê°€-ì½”ë“œë¥¼-ì´ìš©í•˜ì—¬-ì¹´ì¹´ì˜¤-ì„œë²„ì—-í† í°-ìš”ì²­">4. í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ ë°›ì€ ì¸ê°€ ì½”ë“œë¥¼ ì´ìš©í•˜ì—¬ ì¹´ì¹´ì˜¤ ì„œë²„ì— í† í° ìš”ì²­</h2>

<ul>
  <li>ë¨¼ì € í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì¸ê°€ ì½”ë“œë¥¼ ë°›ì•„ì˜¤ëŠ” ì—”ë“œí¬ì¸íŠ¸ì—ì„œ, ì¹´ì¹´ì˜¤ ì„œë²„ì— ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œ</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="cm">/* AuthController.java */</span>
<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/kakao"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">UserDTO</span><span class="o">&gt;</span> <span class="nf">kakaoLogin</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">UserDTO</span> <span class="n">userDTO</span> <span class="o">=</span> <span class="n">authService</span><span class="o">.</span><span class="na">kakaoLogin</span><span class="o">(</span><span class="n">code</span><span class="o">);</span>
  <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">userDTO</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="cm">/* AuthService - kakaoLogin ë©”ì†Œë“œ */</span>
<span class="kd">public</span> <span class="nc">UserDTO</span> <span class="nf">kakaoLogin</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">KakaoTokenDto</span> <span class="n">kakaoTokenDto</span> <span class="o">=</span> <span class="n">getKakaoAccessToken</span><span class="o">(</span><span class="n">code</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">kakaoTokenDto</span><span class="o">.</span><span class="na">getAccess_token</span><span class="o">();</span>
  <span class="cm">/* Â·Â·Â· */</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getKakaoAccessToken</code> : ì¹´ì¹´ì˜¤ ì„œë²„ì— ì•¡ì„¸ìŠ¤ í† í° ìš”ì²­ ë¶€ë¶„</li>
</ul>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="cm">/* AuthService - getKakaoAccessToken ë©”ì†Œë“œ */</span>
<span class="kd">public</span> <span class="nc">KakaoTokenDto</span> <span class="nf">getKakaoAccessToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">HttpHeaders</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpHeaders</span><span class="o">();</span>
  <span class="n">headers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Content-type"</span><span class="o">,</span> <span class="s">"application/x-www-form-urlencoded;charset=utf-8"</span><span class="o">);</span>

  <span class="nc">MultiValueMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedMultiValueMap</span><span class="o">&lt;&gt;();</span>
  <span class="n">params</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"grant_type"</span><span class="o">,</span> <span class="s">"authorization_code"</span><span class="o">);</span>
  <span class="n">params</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"client_id"</span><span class="o">,</span> <span class="no">KAKAO_CLIENT_ID</span><span class="o">);</span>
  <span class="n">params</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"redirect_uri"</span><span class="o">,</span> <span class="no">KAKAO_REDIRECT_URI</span><span class="o">);</span>
  <span class="n">params</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"code"</span><span class="o">,</span> <span class="n">code</span><span class="o">);</span>
  <span class="n">params</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"client_secret"</span><span class="o">,</span> <span class="no">KAKAO_CLIENT_SECRET</span><span class="o">);</span>

  <span class="nc">HttpEntity</span><span class="o">&lt;</span><span class="nc">MultiValueMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpEntity</span><span class="o">&lt;&gt;(</span><span class="n">params</span><span class="o">,</span> <span class="n">headers</span><span class="o">);</span>
  <span class="nc">RestTemplate</span> <span class="n">restTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RestTemplate</span><span class="o">();</span>

  <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">exchange</span><span class="o">(</span>
          <span class="s">"https://kauth.kakao.com/oauth/token"</span><span class="o">,</span>
          <span class="nc">HttpMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">,</span>
          <span class="n">request</span><span class="o">,</span>
          <span class="nc">String</span><span class="o">.</span><span class="na">class</span>
  <span class="o">);</span>
<span class="cm">/* Â·Â·Â· */</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

  </div>
</details>

<h2 id="5-ì¹´ì¹´ì˜¤-ì„œë²„ì—ì„œ-ë°±ì—”ë“œ-ì„œë²„ë¡œ-í† í°-ë°œí–‰">5. ì¹´ì¹´ì˜¤ ì„œë²„ì—ì„œ ë°±ì—”ë“œ ì„œë²„ë¡œ í† í° ë°œí–‰</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">getKakaoAccessToken</code> : ì¹´ì¹´ì˜¤ ì„œë²„ë¡œë¶€í„° ì•¡ì„¸ìŠ¤ í† í° ë°œê¸‰ ë¶€ë¶„</li>
</ul>
<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="cm">/* AuthService - getKakaoAccessToken ë©”ì†Œë“œ */</span>
<span class="kd">public</span> <span class="nc">KakaoTokenDto</span> <span class="nf">getKakaoAccessToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
  <span class="cm">/* Â·Â·Â· */</span>
  <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectMapper</span><span class="o">();</span>
  <span class="n">objectMapper</span><span class="o">.</span><span class="na">registerModule</span><span class="o">(</span><span class="k">new</span> <span class="nc">JavaTimeModule</span><span class="o">());</span>
  <span class="n">objectMapper</span><span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">DeserializationFeatureFAIL_ON_UNKNOWN_PROPERTIES</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

  <span class="nc">KakaoTokenDto</span> <span class="n">kakaoTokenDto</span><span class="o">;</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">kakaoTokenDto</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getBody</span><span class="o">(),</span> <span class="nc">KakaoTokenDto</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"ì¹´ì¹´ì˜¤ í† í°ì„ ë°›ì•„ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="k">return</span> <span class="n">kakaoTokenDto</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

  </div>
</details>

<h2 id="6ï¸-í† í°-ë°œê¸‰ì´-ì™„ë£Œë˜ë©´-ì‚¬ìš©ì-ì •ë³´-ì¡°íšŒ-í›„-jwt-í† í°-ìƒì„±">6.â—ï¸ í† í° ë°œê¸‰ì´ ì™„ë£Œë˜ë©´ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ í›„ JWT í† í° ìƒì„±</h2>
<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="cm">/* AuthService - kakaoLogin ë©”ì†Œë“œ */</span>
<span class="kd">public</span> <span class="nc">UserDTO</span> <span class="nf">kakaoLogin</span><span class="o">(</span><span class="nc">String</span> <span class="n">code</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">KakaoTokenDto</span> <span class="n">kakaoTokenDto</span> <span class="o">=</span> <span class="n">getKakaoAccessToken</span><span class="o">(</span><span class="n">code</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">kakaoTokenDto</span><span class="o">.</span><span class="na">getAccess_token</span><span class="o">();</span>

  <span class="nc">KakaoAccountDto</span> <span class="n">kakaoUserInfoDto</span> <span class="o">=</span> <span class="n">getKakaoUserInfo</span><span class="o">(</span><span class="n">accessToken</span><span class="o">);</span>
  <span class="cm">/* Â·Â·Â· */</span>
  <span class="nc">UserEntity</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">email</span><span class="o">).</span><span class="na">orElseGet</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="cm">/* Â·Â·Â· */</span>
  <span class="o">});</span>

  <span class="nc">String</span> <span class="n">jwt</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">generateToken</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">refreshToken</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">generateRefreshToken</span><span class="o">(</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;(),</span> <span class="n">user</span><span class="o">);</span>

  <span class="nc">UserDTO</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">UserDTO</span><span class="o">.</span><span class="na">toDTO</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="n">jwt</span><span class="o">);</span>
  <span class="n">response</span><span class="o">.</span><span class="na">setRefreshToken</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">);</span>

  <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

  </div>
</details>

<blockquote>
  <ul>
    <li>ë°œê¸‰ë°›ì€ <code class="language-plaintext highlighter-rouge">accessToken</code>ì„ ì‚¬ìš©í•˜ì—¬ <code class="language-plaintext highlighter-rouge">getKakaoUserInfo</code> ë©”ì†Œë“œë¥¼ í†µí•´ ì¹´ì¹´ì˜¤ ì„œë²„ì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒ</li>
    <li>ì¡°íšŒí•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì´ìš©í•˜ì—¬ DBì— í•´ë‹¹ ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í›„ ì‚¬ìš©ì ì²˜ë¦¬</li>
    <li>JWT í† í° ë° ë¦¬í”„ë ˆì‹œ í† í°ì„ ìƒì„±</li>
    <li>UserDTO ê°ì²´ë¥¼ ìƒì„± ë° ì‚¬ìš©ì ì •ë³´ë¥¼ ë‹´ê³ , í† í°ì„ ì„¤ì •í•˜ì—¬ ë°˜í™˜</li>
  </ul>
</blockquote>

<h2 id="ï¸-ëìœ¼ë¡œ">âœ”ï¸ ëìœ¼ë¡œ</h2>
<ul>
  <li>ë°˜í™˜í•œ JWT í† í°ì„ í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ ë°›ì•„ì„œ ì‚¬ìš©ì ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ ì™„ë£Œí•œë‹¤.</li>
  <li>ì´ ê³¼ì •ì€ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ ê°„ì˜ ì¸ì¦ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ë³´ë‹¤ ì•ˆì „í•˜ê³  í¸ë¦¬í•œ ë¡œê·¸ì¸ ê²½í—˜ì„ ì œê³µí•œë‹¤.</li>
  <li>ë˜í•œ, JWT í† í°ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì„œë²„ ê°„ì˜ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•Šê³ ë„ ì¸ì¦ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ í™•ì¥ì„±ê³¼ ë³´ì•ˆì„±ì„ ë†’ì¼ ìˆ˜ ìˆì—ˆë‹¤.</li>
</ul>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="JWT" /><category term="Social Login" /><category term="Kakao" /><category term="OAuth2.0" /><summary type="html"><![CDATA[ğŸ“Œ Server Side]]></summary></entry><entry><title type="html">JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (4)</title><link href="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(4)/" rel="alternate" type="text/html" title="JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (4)" /><published>2024-06-12T00:00:00+09:00</published><updated>2024-06-12T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/JWT%20+%20%EC%B9%B4%EC%B9%B4%EC%98%A4%20%EC%86%8C%EC%85%9C%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%20(4)</id><content type="html" xml:base="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(4)/"><![CDATA[<p><img src="/assets/img/posts/Petstagram-Project/react-springboot-social-login.png" alt="Login Flow Chart" width="auto" height="589" />
<em>React + SpringBoot + Kakao ì†Œì…œ ë¡œê·¸ì¸ ë™ì‘ ê³¼ì •</em></p>

<h1 id="-client-side">ğŸ“Œ Client Side</h1>

<h2 id="1-ì¹´ì¹´ì˜¤-ë¡œê·¸ì¸-í´ë¦­--ì¹´ì¹´ì˜¤-ì„œë²„ì—-ì¸ê°€ì½”ë“œ-ìš”ì²­">1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í´ë¦­ â¡ <strong>ì¹´ì¹´ì˜¤ ì„œë²„ì— ì¸ê°€ì½”ë“œ ìš”ì²­</strong></h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="p">=</span><span class="si">{</span><span class="nx">KAKAO_AUTH_URL</span><span class="si">}</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="p">=</span><span class="si">{</span><span class="nx">icons</span><span class="p">.</span><span class="nx">kakaoLogin</span><span class="si">}</span> <span class="na">alt</span><span class="p">=</span><span class="s">"KakaoLogo"</span> <span class="na">className</span><span class="p">=</span><span class="s">"kakao-login-icon"</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">CLIENT_ID</span> <span class="o">=</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_KAKAO_CLIENT_ID</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">REDIRECT_URI</span> <span class="o">=</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_KAKAO_REDIRECT_URI</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">KAKAO_AUTH_URL</span> <span class="o">=</span> <span class="s2">`https://kauth.kakao.com/oauth/authorize?client_id=</span><span class="p">${</span><span class="nx">CLIENT_ID</span><span class="p">}</span><span class="s2">&amp;redirect_uri=</span><span class="p">${</span><span class="nx">REDIRECT_URI</span><span class="p">}</span><span class="s2">&amp;response_type=code`</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>ğŸ° ì¹´ì¹´ì˜¤ ì„œë²„ì— ì•± í‚¤ì™€ Redirect URI, ì‘ë‹µ ìœ í˜•ì„ í¬í•¨í•˜ì—¬ ì¸ê°€ ì½”ë“œë¥¼ ìš”ì²­í•˜ëŠ”ë° ì´ ìš”ì²­ì€ ì‚¬ìš©ìê°€ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ì—ì„œ ì¸ì¦ ë° ë™ì˜ë¥¼ ì™„ë£Œí•œ í›„, ì„¤ì •ëœ Redirect URIë¡œ ì¸ê°€ ì½”ë“œë¥¼ ì „ë‹¬ë°›ê¸° ìœ„í•œ ê²ƒ</p>
</blockquote>

<h2 id="2-ì„¤ì •í•œ-redirect-uriì¸-loginoauth2callbackkakao-ê²½ë¡œë¡œ-ë¦¬ë‹¤ì´ë ‰ì…˜-í•˜ê¸°-ìœ„í•œ-kakaocallback-ì»´í¬ë„ŒíŠ¸-ë¼ìš°íŠ¸-ì„¤ì •">2. ì„¤ì •í•œ Redirect URIì¸ <span style="color: #efdb4f">/login/oauth2/callback/kakao</span> ê²½ë¡œë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ í•˜ê¸° ìœ„í•œ KakaoCallback ì»´í¬ë„ŒíŠ¸ ë¼ìš°íŠ¸ ì„¤ì •</h2>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="p">&lt;</span><span class="nc">Route</span>
  <span class="na">path</span><span class="p">=</span><span class="s">"/login/oauth2/callback/kakao"</span>
  <span class="na">element</span><span class="p">=</span><span class="si">{</span><span class="p">&lt;</span><span class="nc">KakaoCallback</span> <span class="na">setIsLoggedIn</span><span class="p">=</span><span class="si">{</span><span class="nx">setIsLoggedIn</span><span class="si">}</span> <span class="p">/&gt;</span><span class="si">}</span>
<span class="p">/&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="3-1-ë Œë”ë§í•œ-kakaocallback-ì»´í¬ë„ŒíŠ¸ì—ì„œ-ì¸ê°€-ì½”ë“œ-ì¶”ì¶œ-ë°-ì‚¬ìš©ì-ì²˜ë¦¬">3-1. ë Œë”ë§í•œ <span style="color: #efdb4f">KakaoCallback</span> ì»´í¬ë„ŒíŠ¸ì—ì„œ ì¸ê°€ ì½”ë“œ ì¶”ì¶œ ë° ì‚¬ìš©ì ì²˜ë¦¬</h2>

<blockquote>
  <p>ì´ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” URLì— í¬í•¨ëœ ì¸ì¦ ì½”ë“œë¥¼ ì¶”ì¶œí•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ì— ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­í•˜ê³ , JWT í† í°ì„ ë°›ê²Œë˜ë©´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³ , ë¡œê·¸ì¸ ì²˜ë¦¬ë¥¼ ì—…ë°ì´íŠ¸ í•œ í›„ ë©”ì¸ í™ˆìœ¼ë¡œ ë„¤ë¹„ê²Œì´ì…˜í•œë‹¤.</p>
</blockquote>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">fetchKakaoToken</span> <span class="o">=</span> <span class="k">async </span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">code</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">URLSearchParams</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span><span class="p">).</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">KakaoService</span><span class="p">.</span><span class="nf">getAccessToken</span><span class="p">(</span><span class="nx">code</span><span class="p">);</span>
        <span class="kd">const</span> <span class="nx">token</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">localStorage</span><span class="p">.</span><span class="nf">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">token</span><span class="dl">"</span><span class="p">,</span> <span class="nx">token</span><span class="p">);</span>
          <span class="nf">setIsLoggedIn</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
          <span class="nf">navigate</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ë¡œê·¸ì¸ ì‹¤íŒ¨:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—ëŸ¬:</span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nf">fetchKakaoToken</span><span class="p">();</span>
<span class="p">},</span> <span class="p">[</span><span class="nx">location</span><span class="p">,</span> <span class="nx">navigate</span><span class="p">,</span> <span class="nx">setIsLoggedIn</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

  </div>
</details>

<h2 id="3-2-ë°±ì—”ë“œ-ì„œë²„ë¡œ-ì¸ê°€-ì½”ë“œ-ì „ë‹¬">3-2. ë°±ì—”ë“œ ì„œë²„ë¡œ ì¸ê°€ ì½”ë“œ ì „ë‹¬</h2>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">KakaoService</code>ëŠ” ì¸ê°€ ì½”ë“œë¥¼ ë°±ì—”ë“œ ì„œë²„ë¡œ ì „ë‹¬í•˜ì—¬ ì•¡ì„¸ìŠ¤ í† í°ì„ ìš”ì²­</p>
</blockquote>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="kd">static</span> <span class="k">async</span> <span class="nf">getAccessToken</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span>
        <span class="s2">`</span><span class="p">${</span><span class="nx">KakaoService</span><span class="p">.</span><span class="nx">BASE_URL</span><span class="p">}</span><span class="s2">/login/kakao?code=</span><span class="p">${</span><span class="nx">code</span><span class="p">}</span><span class="s2">`</span>
      <span class="p">);</span>
      <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ë¡œê·¸ì¸ ì‹¤íŒ¨: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nc">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">ë¡œê·¸ì¸ ì‹¤íŒ¨: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>

  </div>
</details>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="JWT" /><category term="Social Login" /><category term="Kakao" /><category term="OAuth2.0" /><summary type="html"><![CDATA[React + SpringBoot + Kakao ì†Œì…œ ë¡œê·¸ì¸ ë™ì‘ ê³¼ì •]]></summary></entry><entry><title type="html">JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (3)</title><link href="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(3)/" rel="alternate" type="text/html" title="JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (3)" /><published>2024-06-11T00:00:00+09:00</published><updated>2024-06-11T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/JWT%20+%20%EC%B9%B4%EC%B9%B4%EC%98%A4%20%EC%86%8C%EC%85%9C%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%20(3)</id><content type="html" xml:base="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(3)/"><![CDATA[<style>
  .flex-container {
    display: flex;
    justify-content: space-between;
  }
  .image-container {
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .image-container img {
    width: 300px;
    height: 400px;
  }
  .caption {
    text-align: center;
    margin-top: 5px;
  }
  .link-container {
    display: flex;
    border: 1px solid #d0d0d0;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    color: inherit;
  }
  .link-container img {
    width: 100%;
    height: 100%;
    padding: 0 10px;
    margin-right: 70px;
  }
  .link-content {
    margin: auto 20px;
    padding: 0;
  }
  .link-content h2 {
    margin-top: 10px;
    margin-bottom: 5px;
  }
  .link-content a {
    color: gray;
    margin-top: 5px;
    display: block;
  }
</style>

<div class="flex-container">
  <div class="image-container">
    <img src="/assets/img/posts/Petstagram-Project/kakao-login-main.png" alt="ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (1)" />
    <div class="caption">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (1)</div>
  </div>
  <div class="image-container">
    <img src="/assets/img/posts/Petstagram-Project/kakao-login-sub.png" alt="ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (2)" />
    <div class="caption">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (2)</div>
  </div>
</div>

<h2 id="1-ì¹´ì¹´ì˜¤-ë””ë²¨ë¡œí¼-ì„¤ì •">1. ì¹´ì¹´ì˜¤ ë””ë²¨ë¡œí¼ ì„¤ì •</h2>

<div class="link-container" onclick="window.open('https://developers.kakao.com/', '_blank');">
  <img src="./assets/img/posts/Petstagram-Project/kakao-developer-logo.png" alt="Kakao Developers" />
  <div class="link-content">
    <h2>Kakao Developers</h2>
    <p>ì¹´ì¹´ì˜¤ APIë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•´ë³´ì„¸ìš”. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸, ë©”ì‹œì§€ ë³´ë‚´ê¸°, ì¹œêµ¬ API, ì¸ê³µì§€ëŠ¥ API ë“±ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
    <a href="https://developers.kakao.com">developers.kakao.com</a>
  </div>
</div>
<p><br /></p>

<blockquote>
  <p>ìœ„ì˜ ë§í¬ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡ì„ í•´ì¤€ë‹¤.</p>
</blockquote>

<p><img src="/assets/img/posts/Petstagram-Project/kakao-register-app.png" alt="Register Application" width="auto" height="589" />
<em>ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€í•˜ê¸°</em></p>

<blockquote>
  <p>í”Œë«í¼ â¡ï¸ Web ë“±ë¡</p>
  <ul>
    <li>ë³¸ì¸ì˜ React, SpringBoot ë„ë©”ì¸ ë“±ë¡</li>
    <li>ê¸°ë³¸ ë„ë©”ì¸ì€ ì¹´ì¹´ì˜¤ ì„œë²„ì— ë¨¼ì € ìš”ì²­ì„ ë³´ë‚´ëŠ” React ë„ë©”ì¸ ì…ë ¥</li>
  </ul>
</blockquote>

<p><img src="/assets/img/posts/Petstagram-Project/kakao-register-platform.png" alt="Register PlatForm" width="auto" height="589" />
<em>í”Œë«í¼ ë“±ë¡</em></p>

<blockquote>
  <p>Redirect URI ì„¤ì •</p>
</blockquote>

<p><img src="/assets/img/posts/Petstagram-Project/kakao-register-Callback.png" alt="Register Callback" width="auto" height="589" />
<em>Redirect URI ë“±ë¡</em></p>

<h2 id="ï¸redirect-urië€">â—ï¸Redirect URIë€?</h2>
<ul>
  <li>Redirect URIëŠ” OAuth2.0 ì¸ê°€ ê³¼ì •ì„ ì™„ë£Œí•œ í›„, ì‚¬ìš©ìì˜ ì¸ì¦ ê²°ê³¼(ì¸ì¦ ì½”ë“œ, í† í° ë“±)ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ìë¥¼ ë¦¬ë‹¤ì´ë ‰ì…˜í•˜ëŠ” URLì´ë‹¤.</li>
</ul>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="JWT" /><category term="Social Login" /><category term="Kakao" /><category term="OAuth2.0" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (2)</title><link href="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(2)/" rel="alternate" type="text/html" title="JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (2)" /><published>2024-06-10T00:00:00+09:00</published><updated>2024-06-10T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/JWT%20+%20%EC%B9%B4%EC%B9%B4%EC%98%A4%20%EC%86%8C%EC%85%9C%20%EB%A1%9C%EA%B7%B8%EC%9D%B8%20(2)</id><content type="html" xml:base="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-(2)/"><![CDATA[<h3 id="-reactì™€-spring-bootë¥¼-ì‚¬ìš©í•˜ì—¬-jwtë¥¼-ê¸°ë°˜ìœ¼ë¡œ-ë¡œê·¸ì¸-ì„¸ì…˜ì„-ê´€ë¦¬í•˜ëŠ”-ê³¼ì •">ğŸ“Œ Reactì™€ Spring Bootë¥¼ ì‚¬ìš©í•˜ì—¬ JWTë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ê³¼ì •</h3>

<h3 id="1-reactì—ì„œ-api-ìš”ì²­">1. Reactì—ì„œ API ìš”ì²­</h3>

<p>React í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ í›„ ë¡œê·¸ì¸ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ì„ ì²˜ë¦¬</p>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">axios</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">UserService</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="nx">BASE_URL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">http://localhost:8088</span><span class="dl">'</span><span class="p">;</span>

    <span class="kd">static</span> <span class="k">async</span> <span class="nf">login</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">BASE_URL</span><span class="p">}</span><span class="s2">/user/login`</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">email</span><span class="p">,</span>
            <span class="nx">password</span><span class="p">,</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </div>
</details>

<blockquote>
  <ul>
    <li>axios.postë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ APIë¥¼ í˜¸ì¶œ</li>
  </ul>
</blockquote>

<h3 id="2-ë¡œê·¸ì¸-ë°-í† í°-ì¬ë°œê¸‰-ì»¨íŠ¸ë¡¤ëŸ¬">2. ë¡œê·¸ì¸ ë° í† í° ì¬ë°œê¸‰ ì»¨íŠ¸ë¡¤ëŸ¬</h3>
<p>ì„œë²„ë‹¨ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ë¡œê·¸ì¸ ë° í† í° ì¬ë°œê¸‰ ìš”ì²­ì„ ì²˜ë¦¬</p>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="nd">@RestController</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/user"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">UserService</span> <span class="n">userService</span><span class="o">;</span>

    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/login"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">UserDTO</span><span class="o">&gt;</span> <span class="nf">login</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">UserDTO</span> <span class="n">userDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">userService</span><span class="o">.</span><span class="na">login</span><span class="o">(</span><span class="n">userDTO</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="c1">// ìƒˆë¡œê³ ì¹¨ í† í°</span>
    <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/refresh"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">UserDTO</span><span class="o">&gt;</span> <span class="nf">refreshToken</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">UserDTO</span> <span class="n">userDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">ok</span><span class="o">(</span><span class="n">userService</span><span class="o">.</span><span class="na">refreshToken</span><span class="o">(</span><span class="n">userDTO</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </div>
</details>

<blockquote>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">/login</code> ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ì‚¬ìš©ì ì¸ì¦ í›„ JWT í† í°ì„ ë°˜í™˜</li>
    <li><code class="language-plaintext highlighter-rouge">/refresh</code> ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìƒˆë¡œê³ ì¹¨ í† í°ì„ ì‚¬ìš©í•´ ìƒˆë¡œìš´ JWT í† í°ì„ ë°˜í™˜</li>
  </ul>
</blockquote>

<h3 id="3-userservice-í´ë˜ìŠ¤">3. UserService í´ë˜ìŠ¤</h3>

<p><code class="language-plaintext highlighter-rouge">UserService</code> í´ë˜ìŠ¤ì—ì„œëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° í† í° ì¬ë°œê¸‰ ë¡œì§ì„ êµ¬í˜„</p>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="rouge-code"><pre>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">UserDTO</span> <span class="nf">login</span><span class="o">(</span><span class="nc">UserDTO</span> <span class="n">userDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">authenticationManager</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">userDTO</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">userDTO</span><span class="o">.</span><span class="na">getPassword</span><span class="o">())</span>
        <span class="o">);</span>

        <span class="nc">UserEntity</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">userDTO</span><span class="o">.</span><span class="na">getEmail</span><span class="o">())</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë©”ì¼: "</span> <span class="o">+</span> <span class="n">userDTO</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()));</span>

        <span class="c1">// ì¡°íšŒëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ JWT í† í° ìƒì„±</span>
        <span class="nc">String</span> <span class="n">jwt</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">generateToken</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>

        <span class="c1">// ë¹„ì–´ìˆëŠ” ë§µê³¼ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨ í† í° ìƒì„±</span>
        <span class="nc">String</span> <span class="n">refreshToken</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">generateRefreshToken</span><span class="o">(</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;(),</span> <span class="n">user</span><span class="o">);</span>

        <span class="nc">UserDTO</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">UserDTO</span><span class="o">.</span><span class="na">toDTO</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="n">jwt</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setRole</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getRole</span><span class="o">());</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setRefreshToken</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">UserDTO</span> <span class="nf">refreshToken</span><span class="o">(</span><span class="nc">UserDTO</span> <span class="n">userDTO</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">UserDTO</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UserDTO</span><span class="o">();</span>

        <span class="c1">// í† í°ì—ì„œ ì‚¬ìš©ì ì´ë©”ì¼ ì¶”ì¶œ</span>
        <span class="nc">String</span> <span class="n">ourEmail</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">extractUsername</span><span class="o">(</span><span class="n">userDTO</span><span class="o">.</span><span class="na">getToken</span><span class="o">());</span>

        <span class="c1">// ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ, ì—†ìœ¼ë©´ ì˜ˆì™¸ ë°œìƒ</span>
        <span class="nc">UserEntity</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">ourEmail</span><span class="o">)</span>
            <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">UsernameNotFoundException</span><span class="o">(</span><span class="s">"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë©”ì¼: "</span> <span class="o">+</span> <span class="n">ourEmail</span><span class="o">));</span>

        <span class="c1">// í† í° ìœ íš¨ì„± ê²€ì‚¬ í›„ ìœ íš¨í•˜ë‹¤ë©´ ìƒˆë¡œìš´ í† í° ìƒì„±</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">jwtUtils</span><span class="o">.</span><span class="na">isTokenValid</span><span class="o">(</span><span class="n">userDTO</span><span class="o">.</span><span class="na">getToken</span><span class="o">(),</span> <span class="n">users</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">jwt</span> <span class="o">=</span> <span class="n">jwtUtils</span><span class="o">.</span><span class="na">generateToken</span><span class="o">(</span><span class="n">users</span><span class="o">);</span>
            <span class="n">response</span><span class="o">.</span><span class="na">setToken</span><span class="o">(</span><span class="n">jwt</span><span class="o">);</span> 
            <span class="n">response</span><span class="o">.</span><span class="na">setRefreshToken</span><span class="o">(</span><span class="n">userDTO</span><span class="o">.</span><span class="na">getToken</span><span class="o">());</span>   
        <span class="o">}</span>

        <span class="k">return</span> <span class="n">response</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </div>
</details>

<blockquote>
  <ul>
    <li>ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©ì ì¸ì¦ì„ ì²˜ë¦¬í•˜ê³  JWT ë° ìƒˆë¡œê³ ì¹¨ í† í°ì„ ìƒì„±</li>
    <li>ìƒˆë¡œê³ ì¹¨ í† í° ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ê³ , ìœ íš¨í•˜ë‹¤ë©´ ìƒˆë¡œìš´ JWTë¥¼ ìƒì„±</li>
  </ul>
</blockquote>

<h3 id="4-jwtutils-í´ë˜ìŠ¤">4. JWTUtils í´ë˜ìŠ¤</h3>

<p><code class="language-plaintext highlighter-rouge">JWTUtils</code> í´ë˜ìŠ¤ì—ì„œëŠ” JWT ìƒì„± ë° ê²€ì¦ì— í•„ìš”í•œ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë¥¼ êµ¬í˜„</p>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.petstagram.service.utils</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">io.jsonwebtoken.Claims</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">io.jsonwebtoken.Jwts</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.userdetails.UserDetails</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.crypto.SecretKey</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Base64</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.function.Function</span><span class="o">;</span>

<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JWTUtils</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">SecretKey</span> <span class="n">key</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">ACCESS_TOKEN_EXPIRATION_TIME</span> <span class="o">=</span> <span class="mi">1800000</span><span class="o">;</span> <span class="c1">// 30ë¶„</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">REFRESH_TOKEN_EXPIRATION_TIME</span> <span class="o">=</span> <span class="mi">604800000</span><span class="o">;</span> <span class="c1">// 7ì¼</span>

    <span class="kd">public</span> <span class="nf">JWTUtils</span><span class="o">(</span><span class="nd">@Value</span><span class="o">(</span><span class="s">"${jwt.secret}"</span><span class="o">)</span> <span class="nc">String</span> <span class="n">secretString</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">keyBytes</span> <span class="o">=</span> <span class="nc">Base64</span><span class="o">.</span><span class="na">getDecoder</span><span class="o">().</span><span class="na">decode</span><span class="o">(</span><span class="n">secretString</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
        <span class="k">this</span><span class="o">.</span><span class="na">key</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SecretKeySpec</span><span class="o">(</span><span class="n">keyBytes</span><span class="o">,</span> <span class="s">"HmacSHA256"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">generateToken</span><span class="o">(</span><span class="nc">UserDetails</span> <span class="n">userDetails</span><span class="o">){</span>
        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">userDetails</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setIssuedAt</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">setExpiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">+</span> <span class="no">ACCESS_TOKEN_EXPIRATION_TIME</span><span class="o">))</span>
                <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
                <span class="o">.</span><span class="na">compact</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">generateRefreshToken</span><span class="o">(</span><span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">claims</span><span class="o">,</span> <span class="nc">UserDetails</span> <span class="n">userDetails</span><span class="o">){</span>
        <span class="k">return</span> <span class="nc">Jwts</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setClaims</span><span class="o">(</span><span class="n">claims</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setSubject</span><span class="o">(</span><span class="n">userDetails</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())</span>
                <span class="o">.</span><span class="na">setIssuedAt</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">setExpiration</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">+</span> <span class="no">REFRESH_TOKEN_EXPIRATION_TIME</span><span class="o">))</span>
                <span class="o">.</span><span class="na">signWith</span><span class="o">(</span><span class="n">key</span><span class="o">)</span>
                <span class="o">.</span><span class="na">compact</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">extractUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">){</span>
        <span class="k">return</span> <span class="nf">extractClaims</span><span class="o">(</span><span class="n">token</span><span class="o">,</span> <span class="nl">Claims:</span><span class="o">:</span><span class="n">getSubject</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="no">T</span> <span class="nf">extractClaims</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">,</span> <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Claims</span><span class="o">,</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">claimsResolver</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">claimsResolver</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="nc">Jwts</span><span class="o">.</span><span class="na">parserBuilder</span><span class="o">().</span><span class="na">setSigningKey</span><span class="o">(</span><span class="n">key</span><span class="o">).</span><span class="na">build</span><span class="o">().</span><span class="na">parseClaimsJws</span><span class="o">(</span><span class="n">token</span><span class="o">).</span><span class="na">getBody</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isTokenValid</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">,</span> <span class="nc">UserDetails</span> <span class="n">userDetails</span><span class="o">){</span>
        <span class="kd">final</span> <span class="nc">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">extractUsername</span><span class="o">(</span><span class="n">token</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">username</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">userDetails</span><span class="o">.</span><span class="na">getUsername</span><span class="o">())</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">isTokenExpired</span><span class="o">(</span><span class="n">token</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isTokenExpired</span><span class="o">(</span><span class="nc">String</span> <span class="n">token</span><span class="o">){</span>
        <span class="k">return</span> <span class="nf">extractClaims</span><span class="o">(</span><span class="n">token</span><span class="o">,</span> <span class="nl">Claims:</span><span class="o">:</span><span class="n">getExpiration</span><span class="o">).</span><span class="na">before</span><span class="o">(</span><span class="k">new</span> <span class="nc">Date</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div>    </div>
  </div>
</details>

<blockquote>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">generateToken</code> ë©”ì„œë“œëŠ” ì•¡ì„¸ìŠ¤ í† í°ì„ ìƒì„±</li>
    <li><code class="language-plaintext highlighter-rouge">generateRefreshToken</code> ë©”ì„œë“œëŠ” ìƒˆë¡œê³ ì¹¨ í† í°ì„ ìƒì„±</li>
    <li><code class="language-plaintext highlighter-rouge">extractUsername</code> ë©”ì„œë“œëŠ” í† í°ì—ì„œ ì‚¬ìš©ì ì´ë¦„ì„ ì¶”ì¶œ</li>
    <li><code class="language-plaintext highlighter-rouge">isTokenValid</code> ë©”ì„œë“œëŠ” í† í° ìœ íš¨ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.ì¶œ</li>
  </ul>
</blockquote>

<h3 id="5-ouruserdetailsservice-í´ë˜ìŠ¤">5. OurUserDetailsService í´ë˜ìŠ¤</h3>

<p><code class="language-plaintext highlighter-rouge">OurUserDetailsService</code> í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ì— í•„ìš”í•œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒ</p>

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>
<div>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.petstagram.service.utils</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.petstagram.repository.UserRepository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.userdetails.UserDetails</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.userdetails.UserDetailsService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.userdetails.UsernameNotFoundException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>

<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OurUserDetailsService</span> <span class="kd">implements</span> <span class="nc">UserDetailsService</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserDetails</span> <span class="nf">loadUserByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">UsernameNotFoundException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">username</span><span class="o">)</span>
                <span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. email = "</span> <span class="o">+</span> <span class="n">username</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div>    </div>
  </div>
</details>

<blockquote>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">loadUserByUsername</code> ë©”ì„œë“œëŠ” ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒ</li>
  </ul>
</blockquote>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="JWT" /><category term="Social Login" /><category term="Kakao" /><category term="OAuth2.0" /><summary type="html"><![CDATA[ğŸ“Œ Reactì™€ Spring Bootë¥¼ ì‚¬ìš©í•˜ì—¬ JWTë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¡œê·¸ì¸ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ê³¼ì •]]></summary></entry><entry><title type="html">JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (1)</title><link href="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8/" rel="alternate" type="text/html" title="JWT + ì¹´ì¹´ì˜¤ ì†Œì…œ ë¡œê·¸ì¸ (1)" /><published>2024-06-09T00:00:00+09:00</published><updated>2024-06-09T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/JWT%20+%20%EC%B9%B4%EC%B9%B4%EC%98%A4%20%EC%86%8C%EC%85%9C%20%EB%A1%9C%EA%B7%B8%EC%9D%B8</id><content type="html" xml:base="https://heominseok.github.io/posts/JWT-+-%EC%B9%B4%EC%B9%B4%EC%98%A4-%EC%86%8C%EC%85%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8/"><![CDATA[<style>
  .flex-container {
    display: flex;
    justify-content: space-between;
  }
  .image-container {
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .image-container img {
    width: 100%;
    height: 300px;
  }
  .caption {
    text-align: center;
    margin-top: 5px;
  }
</style>

<div class="flex-container">
  <div class="image-container">
    <img src="/assets/img/posts/Petstagram-Project/login.png" alt="ë¡œê·¸ì¸ UI" />
    <div class="caption">ë¡œê·¸ì¸ UI</div>
  </div>
  <div class="image-container">
    <img src="/assets/img/posts/Petstagram-Project/kakaologin.png" alt="ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸" />
    <div class="caption">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸</div>
  </div>
</div>

<h2 id="jwtjason-web-token">JWT(Jason Web Token)</h2>
<p><strong>JWT(JSON Web Token)</strong>ëŠ” ë‘ ê°œì²´ ê°„ì— ì •ë³´ë¥¼ JSON ê°ì²´ë¡œ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°œë°©í˜• í‘œì¤€( RFC7519 )ì´ê³ , ë””ì§€í„¸ ì„œëª…ìœ¼ë¡œ ê²€ì¦ë˜ê³  ì‹ ë¢°ë  ìˆ˜ ìˆë‹¤. JWTëŠ” ì£¼ë¡œ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œ í›„ ìš”ì²­ë§ˆë‹¤ JWTë¥¼ í¬í•¨ì‹œì¼œ í—ˆìš©ëœ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ê¶Œí•œ ë¶€ì—¬ì™€ ë‹¹ì‚¬ì ê°„ì— ì•ˆì „í•˜ê²Œ ì •ë³´ë¥¼ ì „ì†¡í•˜ëŠ” ì •ë³´ êµí™˜ì— ì‚¬ìš©ëœë‹¤. ì„œëª…ëœ í† í°ì€ í´ë ˆì„ì˜ ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê³ , ê³µê°œ/ë¹„ê³µê°œ í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ ë°œì‹ ìì˜ ì‹ ì›ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<h2 id="jwtì˜-êµ¬ì„±ìš”ì†Œ">JWTì˜ êµ¬ì„±ìš”ì†Œ</h2>
<p><strong>JWT(JSON Web Token)</strong>ëŠ” (.)ìœ¼ë¡œ êµ¬ë¶„ëœ ì„¸ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ìˆë‹¤.</p>
<ol>
  <li>í—¤ë”(Header): í† í° ìœ í˜•ê³¼ ì„œëª… ì•Œê³ ë¦¬ì¦˜ì„ í¬í•¨</li>
  <li>í˜ì´ë¡œë“œ(Payload): ì‚¬ìš©ì ë° ì¶”ê°€ ë°ì´í„°(í´ë ˆì„)ë¥¼ í¬í•¨</li>
  <li>ì„œëª…(Signature): í—¤ë”ì™€ í˜ì´ë¡œë“œì˜ ë¬´ê²°ì„±ì„ ê²€ì¦í•˜ëŠ” ì„œëª…</li>
</ol>

<h2 id="jwt-ë™ì‘-ì›ë¦¬">JWT ë™ì‘ ì›ë¦¬</h2>
<p><img src="/assets/img/posts/Petstagram-Project/jwt-diagram.png" alt="JWT êµ¬ì„± ìš”ì†Œ" /></p>

<p>Reactì™€ Spring Bootë¡œ JWTë¥¼ ì‚¬ìš©í•œ ë¡œê·¸ì¸ êµ¬í˜„ì˜ ë™ì‘ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<h3 id="1-ë¡œê·¸ì¸-ë°-í† í°-ë°œê¸‰">1. ë¡œê·¸ì¸ ë° í† í° ë°œê¸‰</h3>
<ol>
  <li><strong>ID/PW ë¡œê·¸ì¸ ìš”ì²­</strong>: í´ë¼ì´ì–¸íŠ¸(React)ê°€ ì„œë²„(Spring Boot)ì— ì‚¬ìš©ì IDì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³´ë‚´ ë¡œê·¸ì¸ ìš”ì²­ì„ í•œë‹¤.</li>
  <li><strong>í† í° ë°œê¸‰</strong>: ì„œë²„ëŠ” IDì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•œ í›„, Access Tokenê³¼ Refresh Tokenì„ ìƒì„±í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•œë‹¤.</li>
  <li><strong>API ìš”ì²­</strong>: í´ë¼ì´ì–¸íŠ¸ëŠ” ì´í›„ì˜ API ìš”ì²­ ì‹œ Access Tokenì„ HTTP í—¤ë”ì— í¬í•¨í•˜ì—¬ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤.</li>
</ol>

<h3 id="2-í† í°-ê°±ì‹ ">2. í† í° ê°±ì‹ </h3>
<ol>
  <li><strong>Access Token ë§Œë£Œ ì‘ë‹µ</strong>: ì„œë²„ê°€ Access Tokenì˜ ë§Œë£Œë¥¼ ê°ì§€í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ë§Œë£Œ ì‘ë‹µì„ ë³´ë‚¸ë‹¤.</li>
  <li><strong>í† í° ì¬ë°œê¸‰ ìš”ì²­</strong>: í´ë¼ì´ì–¸íŠ¸ëŠ” Refresh Tokenì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ Access Tokenê³¼ Refresh Tokenì˜ ì¬ë°œê¸‰ì„ ì„œë²„ì— ìš”ì²­í•œë‹¤.</li>
  <li><strong>ìƒˆ í† í° ë°œê¸‰</strong>: ì„œë²„ëŠ” Refresh Tokenì„ ê²€ì¦í•˜ê³ , ìƒˆë¡œìš´ Access Tokenê³¼ Refresh Tokenì„ ë°œê¸‰í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•œë‹¤.</li>
</ol>

<p>ì´ ê³¼ì •ì€ Access Tokenì˜ ì§§ì€ ìœ íš¨ê¸°ê°„ìœ¼ë¡œ ì¸í•´ ìì£¼ ê°±ì‹ ì´ í•„ìš”í•  ë•Œ, Refresh Tokenì„ í†µí•´ ìƒˆë¡œìš´ Access Tokenì„ ë°œê¸‰ë°›ì•„ ì§€ì†ì ì¸ ì¸ì¦ ìƒíƒœë¥¼ ìœ ì§€í•˜ê²Œ í•œë‹¤.</p>

<blockquote>
  <h3 id="ì°¸ì¡°">[ì°¸ì¡°]</h3>
  <p><a href="https://jwt.io/introduction">https://jwt.io/introduction</a></p>
</blockquote>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="JWT" /><category term="Social Login" /><category term="Kakao" /><category term="OAuth2.0" /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">ğŸ¶ PETSTAGRAM í”„ë¡œì íŠ¸</title><link href="https://heominseok.github.io/posts/Petstagram-Project/" rel="alternate" type="text/html" title="ğŸ¶ PETSTAGRAM í”„ë¡œì íŠ¸" /><published>2024-06-08T00:00:00+09:00</published><updated>2024-06-08T00:00:00+09:00</updated><id>https://heominseok.github.io/posts/Petstagram-Project</id><content type="html" xml:base="https://heominseok.github.io/posts/Petstagram-Project/"><![CDATA[<h1 id="í«ìŠ¤íƒ€ê·¸ë¨">í«ìŠ¤íƒ€ê·¸ë¨</h1>

<p><img src="/assets/img/posts/Petstagram-Project/main.png" alt="Main View" width="972" height="589" /></p>

<h3 id="í«ìŠ¤íƒ€ê·¸ë¨ì€-ë°˜ë ¤ë™ë¬¼ê³¼-ì‚¬ëŒì´-í•¨ê»˜-ì‚¶ì„-ì¶”êµ¬í•˜ëŠ”-ì‹œëŒ€ë¥¼-ë°˜ì˜í•˜ì—¬-ë§Œë“ -ì›¹-í”Œë«í¼ì…ë‹ˆë‹¤">â€˜í«ìŠ¤íƒ€ê·¸ë¨â€™ì€ ë°˜ë ¤ë™ë¬¼ê³¼ ì‚¬ëŒì´ í•¨ê»˜ ì‚¶ì„ ì¶”êµ¬í•˜ëŠ” ì‹œëŒ€ë¥¼ ë°˜ì˜í•˜ì—¬ ë§Œë“  ì›¹ í”Œë«í¼ì…ë‹ˆë‹¤.</h3>

<h3 id="ì‚¬ìš©ìë“¤ì€-ë°˜ë ¤ë™ë¬¼-ì‚¬ì§„ê³¼-ë™ì˜ìƒì„-ì—…ë¡œë“œí•˜ê³ -ê³µìœ í•˜ë©°ë‹¤ì–‘í•œ-ë°˜ë ¤ë™ë¬¼-í”„ë¡œí•„ì„-í™•ì¸í•˜ê³ -ì •ë³´ë¥¼-ê³µìœ í•¨ìœ¼ë¡œì¨ìƒˆë¡œìš´-ì¹œêµ¬ë¥¼-ì‚¬ê·ˆ-ìˆ˜-ìˆëŠ”-ì»¤ë®¤ë‹ˆí‹°ë¥¼-í˜•ì„±í•˜ê³ ìë§Œë“¤ê²Œ-ë˜ì—ˆìŠµë‹ˆë‹¤">ì‚¬ìš©ìë“¤ì€ ë°˜ë ¤ë™ë¬¼ ì‚¬ì§„ê³¼ ë™ì˜ìƒì„ ì—…ë¡œë“œí•˜ê³  ê³µìœ í•˜ë©°,Â ë‹¤ì–‘í•œ ë°˜ë ¤ë™ë¬¼ í”„ë¡œí•„ì„ í™•ì¸í•˜ê³  ì •ë³´ë¥¼ ê³µìœ í•¨ìœ¼ë¡œì¨Â ìƒˆë¡œìš´ ì¹œêµ¬ë¥¼ ì‚¬ê·ˆ ìˆ˜ ìˆëŠ” ì»¤ë®¤ë‹ˆí‹°ë¥¼ í˜•ì„±í•˜ê³ ìÂ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</h3>]]></content><author><name></name></author><category term="í”„ë¡œì íŠ¸" /><category term="PETSTAGRAM" /><category term="React" /><category term="Spring Boot" /><category term="Vite" /><summary type="html"><![CDATA[í«ìŠ¤íƒ€ê·¸ë¨]]></summary></entry></feed>